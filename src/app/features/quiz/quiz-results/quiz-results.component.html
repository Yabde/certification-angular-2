<ng-container>
  <div class="container">
    <div class="row text-center">
      <div class="col">
        <h2>RESULTS</h2>
      </div>
    </div>



    <form [formGroup]="formQuizzSubmitted">
      <div class="row justify-content-center py-3" formArrayName="questions">
        <div *ngFor="let qArrayControls of questions.controls; let qArrayIndex=index"
             class="col-11"
             [formGroupName]="qArrayIndex">

          <div class="row">
            <div class="row">
              <div class="col">
                <p>{{ qArrayControls.value['question'] | htmlSanitized }}</p>
              </div>
            </div>

            <div class="row">
              <div class="col" *ngFor="let choice of choices(qArrayControls); let choiceIndex=index">

                <input type="radio"
                       class="btn-check"
                       [id]="'success-outlined-' + qArrayIndex + '-' + choiceIndex"
                       formControlName="selectedChoice"
                       [value]="choice"
                >
                <label class="btn btn-outline-success"
                       [ngClass]="{
                       'btn-error-custom': choice !== correctAnswer(qArrayControls)
                                          && !(selectedChoice(qArrayControls) === correctAnswer(qArrayControls))
                                          && choice === selectedChoice(qArrayControls),
                       'btn-success-custom': choice === correctAnswer(qArrayControls)
                       }"
                       [for]="'success-outlined-' + qArrayIndex + '-' + choiceIndex"
                >{{ choice | htmlSanitized }}</label>
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>

    <div class="row py-3 justify-content-center text-center">
      <div class="col-5">
        <p [ngClass]="{
        'bg-success': correctResponse >= 4,
        'bg-warning': correctResponse >= 2 && correctResponse <=3,
        'bg-danger': correctResponse <= 1,
        }"
        >You scored {{correctResponse}} out of {{totalResponse}}</p>
      </div>
    </div>

    <div class="row py-3 justify-content-center">
      <div class="col-10 d-grid gap-2">
        <button class="btn btn-secondary" (click)="redirectToQuizPage()">Create a new quiz</button>
      </div>
    </div>
  </div>
</ng-container>
